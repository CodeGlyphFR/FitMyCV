<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vue d'ensemble & Architecture | FitMyCV.io</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./assets/css/style.css?v=1.0.4">
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>mermaid.initialize({ startOnLoad: false });</script>
</head>
<body>
  <div class="layout">
    <div id="sidebar-container"></div>
    <main class="main">
      <div id="header-container"></div>
      <div class="content">
        <div class="breadcrumb">
          <a href="./index.html">Accueil</a>
          <span>/</span>
          <span>Vue d'ensemble & Architecture</span>
        </div>

        <h1>Vue d'ensemble & Architecture</h1>
        <p class="lead">
          FitMyCV.io est une plateforme SaaS de nouvelle generation qui permet de creer, optimiser et exporter des CV personnalises grace a l'intelligence artificielle. Cette page presente l'architecture globale du systeme, ses choix techniques et les principes d'ingenierie qui garantissent fiabilite et evolutivite.
        </p>

        <!-- ============================================================ -->
        <!-- METRIQUES CLES                                               -->
        <!-- ============================================================ -->

        <div class="card-grid">
          <div class="card">
            <h4>175+</h4>
            <p>composants d'interface</p>
          </div>
          <div class="card">
            <h4>123</h4>
            <p>points d'acces API</p>
          </div>
          <div class="card">
            <h4>34</h4>
            <p>modules metier</p>
          </div>
          <div class="card">
            <h4>5</h4>
            <p>pipelines IA specialises</p>
          </div>
        </div>

        <!-- ============================================================ -->
        <!-- ARCHITECTURE MONOLITHIQUE MODULAIRE                          -->
        <!-- ============================================================ -->

        <h2>Un monolithe modulaire par choix</h2>

        <p>
          FitMyCV.io adopte une <strong>architecture monolithique modulaire</strong> &mdash; un choix delibere qui combine la simplicite de deploiement d'un monolithe avec la separation rigoureuse des responsabilites d'une architecture modulaire. Chaque domaine fonctionnel est isole dans son propre module avec une interface publique claire, garantissant un couplage faible et une haute cohesion.
        </p>

        <p>
          Ce choix architectural offre trois avantages majeurs :
        </p>

        <ul>
          <li><strong>Deploiement simplifie</strong> &mdash; Une seule unite de deploiement, sans orchestration de microservices.</li>
          <li><strong>Coherence transactionnelle</strong> &mdash; Les operations critiques (facturation, generation IA, gestion de credits) s'executent dans un contexte partage, sans synchronisation distribuee.</li>
          <li><strong>Modularite interne</strong> &mdash; 34 modules independants organisent la logique metier par domaine, permettant de faire evoluer chaque partie sans impacter les autres.</li>
        </ul>

        <div class="callout callout-info">
          <div class="callout-title">Compromis assume</div>
          <p>La file de taches asynchrones est geree en memoire (sans systeme de messaging externe), ce qui simplifie considerablement l'infrastructure mais limite la mise a l'echelle horizontale. Ce compromis est delibere : il correspond parfaitement aux besoins actuels de la plateforme tout en restant evoluable si necessaire.</p>
        </div>

        <!-- ============================================================ -->
        <!-- ARCHITECTURE EN 4 COUCHES                                    -->
        <!-- ============================================================ -->

        <h2>Architecture en 4 couches</h2>

        <p>
          Le systeme est structure en quatre couches distinctes, chacune ayant un perimetre de responsabilite clairement defini. Ce decoupage garantit que les evolutions d'une couche n'impactent pas les autres.
        </p>

        <div class="diagram">
          <div class="diagram-title">Vue globale de l'architecture</div>
          <div class="mermaid">
flowchart TB
    subgraph Presentation["PRESENTATION"]
        RC["175+ composants d'interface"]
        TW["Styles et animations"]
    end

    subgraph APILayer["COUCHE API"]
        AR["123 points d'acces<br/>repartis en 7 domaines"]
    end

    subgraph Business["LOGIQUE METIER"]
        subgraph Modules["34 MODULES"]
            CVC["Moteur CV"]
            OAI["Intelligence Artificielle"]
            FEAT["5 pipelines IA"]
            SUB["Abonnements et Credits"]
            BJ["Taches asynchrones"]
        end
    end

    subgraph Data["ACCES AUX DONNEES"]
        PR["Couche de persistance"]
        Models["34 entites en 9 domaines"]
    end

    subgraph Infra["SERVICES EXTERNES"]
        PG[("Base de donnees")]
        OpenAI["Moteur IA"]
        Stripe["Paiements"]
        Email["Service d'emails"]
    end

    Presentation --> APILayer
    APILayer --> Business
    Business --> Data
    Data --> PG
    Business --> OpenAI
    Business --> Stripe
    Business --> Email

    style RC fill:#0ea5e9,stroke:#0284c7,color:#fff
    style TW fill:#0ea5e9,stroke:#0284c7,color:#fff
    style AR fill:#6366f1,stroke:#4f46e5,color:#fff
    style CVC fill:#8b5cf6,stroke:#7c3aed,color:#fff
    style OAI fill:#8b5cf6,stroke:#7c3aed,color:#fff
    style FEAT fill:#8b5cf6,stroke:#7c3aed,color:#fff
    style SUB fill:#8b5cf6,stroke:#7c3aed,color:#fff
    style BJ fill:#8b5cf6,stroke:#7c3aed,color:#fff
    style PR fill:#14b8a6,stroke:#0d9488,color:#fff
    style Models fill:#14b8a6,stroke:#0d9488,color:#fff
    style PG fill:#14b8a6,stroke:#0d9488,color:#fff
    style OpenAI fill:#64748b,stroke:#475569,color:#fff
    style Stripe fill:#f59e0b,stroke:#d97706,color:#fff
    style Email fill:#64748b,stroke:#475569,color:#fff
          </div>
        </div>

        <table>
          <thead>
            <tr>
              <th>Couche</th>
              <th>Role</th>
              <th>Envergure</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Presentation</strong></td>
              <td>Interface utilisateur reactive avec rendu hybride (serveur et client)</td>
              <td>175+ composants</td>
            </tr>
            <tr>
              <td><strong>API</strong></td>
              <td>Points d'acces securises avec authentification, validation et formatage</td>
              <td>123 routes en 7 domaines</td>
            </tr>
            <tr>
              <td><strong>Logique metier</strong></td>
              <td>Modules autonomes couvrant l'ensemble des fonctionnalites</td>
              <td>34 modules, 5 pipelines IA</td>
            </tr>
            <tr>
              <td><strong>Donnees</strong></td>
              <td>Persistance relationnelle avec modelisation orientee domaine</td>
              <td>34 entites en 9 domaines</td>
            </tr>
          </tbody>
        </table>

        <!-- ============================================================ -->
        <!-- FLUX DE DONNEES                                              -->
        <!-- ============================================================ -->

        <h2>Flux de donnees</h2>

        <p>
          Chaque interaction utilisateur suit un flux standardise a travers les couches du systeme. Ce diagramme illustre le parcours typique d'une requete, de l'interface jusqu'aux services externes.
        </p>

        <div class="diagram">
          <div class="diagram-title">Parcours d'une requete</div>
          <div class="mermaid">
sequenceDiagram
    participant C as Interface utilisateur
    participant A as Couche API
    participant L as Modules metier
    participant D as Couche de donnees
    participant DB as Base de donnees
    participant E as Services externes

    C->>A: Requete
    A->>A: Authentification et validation
    A->>L: Logique metier
    L->>D: Lecture / ecriture
    D->>DB: Requete
    DB-->>D: Resultat
    L->>E: IA / Paiement / Email
    E-->>L: Reponse
    L-->>A: Donnees traitees
    A-->>C: Reponse
          </div>
        </div>

        <!-- ============================================================ -->
        <!-- 6 DOMAINES FONCTIONNELS                                      -->
        <!-- ============================================================ -->

        <h2>6 domaines fonctionnels</h2>

        <p>
          La logique metier est structuree en 34 modules independants, organises par domaine fonctionnel. Chaque module possede son propre perimetre et expose uniquement une interface publique, garantissant une separation nette des responsabilites.
        </p>

        <div class="card-grid">
          <div class="card">
            <h4>Authentification & Securite</h4>
            <p>Connexion multi-fournisseur (email, Google, GitHub, Apple), validation des fichiers uploades, protection anti-bot, conformite RGPD et gestion des consentements.</p>
          </div>

          <div class="card">
            <h4>Moteur CV</h4>
            <p>Gestion complete du cycle de vie des CV : stockage structure au format JSON, versioning automatique, scoring d'adequation CV/offre, traduction multilingue (4 langues) et export multi-format.</p>
          </div>

          <div class="card">
            <h4>Intelligence Artificielle</h4>
            <p>5 pipelines IA specialises : adaptation de CV selon une offre, optimisation de contenu, import PDF intelligent, generation depuis un intitule de poste, et creation de templates. Chaque pipeline utilise des appels IA parallelises avec des reponses validees par schema.</p>
          </div>

          <div class="card">
            <h4>Abonnements & Credits</h4>
            <p>Systeme de monetisation hybride : abonnements avec limites par fonctionnalite et credits a l'unite, synchronise avec la plateforme de paiement. Remboursement automatique en cas d'echec.</p>
          </div>

          <div class="card">
            <h4>Traitement asynchrone</h4>
            <p>File de taches asynchrones avec suivi temps reel, retry automatique et evenements de progression pour les operations longues (generation IA, export, traduction).</p>
          </div>

          <div class="card">
            <h4>Communication & Monitoring</h4>
            <p>Emails transactionnels avec templates dynamiques, telemetrie d'usage et suivi des couts IA, analytics, et internationalisation complete de l'interface en 4 langues.</p>
          </div>
        </div>

        <!-- ============================================================ -->
        <!-- DEPENDANCES ENTRE MODULES                                    -->
        <!-- ============================================================ -->

        <h2>Dependances entre domaines</h2>

        <p>
          Le graphe de dependances entre les principaux domaines suit un flux unidirectionnel &mdash; aucune dependance circulaire. C'est le signe d'une architecture saine ou chaque domaine peut evoluer independamment.
        </p>

        <div class="diagram">
          <div class="diagram-title">Flux de dependances entre domaines</div>
          <div class="mermaid">
flowchart LR
    auth["Authentification"] --> subscription["Abonnements"]
    auth --> email["Communication"]

    cv["Moteur CV"] --> data["Donnees"]

    features["Pipelines IA"] --> ai["Intelligence Artificielle"]
    features --> cv
    features --> offers["Offres d'emploi"]

    subscription --> data
    subscription --> events["Evenements"]

    jobs["Taches asynchrones"] --> subscription
    jobs --> features

    ai --> monitoring["Monitoring"]

    style auth fill:#6366f1,stroke:#4f46e5,color:#fff
    style subscription fill:#f59e0b,stroke:#d97706,color:#fff
    style email fill:#64748b,stroke:#475569,color:#fff
    style cv fill:#0ea5e9,stroke:#0284c7,color:#fff
    style data fill:#14b8a6,stroke:#0d9488,color:#fff
    style features fill:#8b5cf6,stroke:#7c3aed,color:#fff
    style ai fill:#8b5cf6,stroke:#7c3aed,color:#fff
    style offers fill:#0ea5e9,stroke:#0284c7,color:#fff
    style events fill:#8b5cf6,stroke:#7c3aed,color:#fff
    style jobs fill:#8b5cf6,stroke:#7c3aed,color:#fff
    style monitoring fill:#64748b,stroke:#475569,color:#fff
          </div>
        </div>

        <!-- ============================================================ -->
        <!-- PATTERNS D'INGENIERIE                                        -->
        <!-- ============================================================ -->

        <h2>Patterns d'ingenierie</h2>

        <p>
          Quatre patterns fondamentaux structurent l'ensemble du code et garantissent coherence, fiabilite et maintenabilite a travers toute la plateforme.
        </p>

        <h3>1. API standardisee en 4 phases</h3>

        <p>
          Les 123 points d'acces suivent un protocole identique en quatre phases : <strong>verification de l'identite</strong>, <strong>validation des donnees entrantes</strong>, <strong>execution de la logique metier</strong>, puis <strong>reponse formatee avec gestion d'erreurs</strong>. Cette uniformite facilite la maintenance et l'ajout de nouvelles fonctionnalites.
        </p>

        <h3>2. Erreurs internationalisees par domaine</h3>

        <p>
          Le systeme d'erreurs utilise un mecanisme d'internationalisation par domaine. Chaque erreur est associee a une cle de traduction, permettant a l'interface d'afficher des messages localises dans la langue de l'utilisateur. Les erreurs sont organisees en 8 domaines (authentification, CV, abonnement, taches, extension, compte, etc.) avec support d'actions contextuelles &mdash; par exemple, une erreur de limite atteinte propose directement la mise a niveau du plan.
        </p>

        <div class="diagram">
          <div class="diagram-title">Organisation des erreurs par domaine</div>
          <div class="mermaid">
flowchart TB
    subgraph Factory["Structure d'une erreur"]
        direction TB
        Key["Cle de traduction"]
        Status["Code de statut HTTP"]
        Params["Parametres dynamiques"]
        Action["Action suggeree et<br/>redirection"]
    end

    subgraph Domains["8 DOMAINES"]
        Common["Erreurs communes"]
        Auth["Authentification"]
        Cv["CV"]
        Sub["Abonnement"]
        Bg["Taches"]
        Ext["Extension"]
        Acct["Compte"]
        Other["Autres"]
    end

    Factory --> Domains

    style Key fill:#64748b,stroke:#475569,color:#fff
    style Status fill:#64748b,stroke:#475569,color:#fff
    style Params fill:#64748b,stroke:#475569,color:#fff
    style Action fill:#64748b,stroke:#475569,color:#fff
    style Common fill:#0ea5e9,stroke:#0284c7,color:#fff
    style Auth fill:#6366f1,stroke:#4f46e5,color:#fff
    style Cv fill:#8b5cf6,stroke:#7c3aed,color:#fff
    style Sub fill:#f59e0b,stroke:#d97706,color:#fff
    style Bg fill:#8b5cf6,stroke:#7c3aed,color:#fff
    style Ext fill:#6366f1,stroke:#4f46e5,color:#fff
    style Acct fill:#8b5cf6,stroke:#7c3aed,color:#fff
    style Other fill:#64748b,stroke:#475569,color:#fff
          </div>
        </div>

        <h3>3. Facturation robuste a double voie</h3>

        <p>
          Avant chaque action payante, le systeme execute un protocole de securite en 5 etapes :
        </p>

        <ol>
          <li><strong>Verification des droits</strong> &mdash; Le plan d'abonnement et les quotas sont controles.</li>
          <li><strong>Debit preventif</strong> &mdash; Les credits sont reserves <em>avant</em> l'execution.</li>
          <li><strong>Execution de l'action</strong> &mdash; La generation IA ou l'operation demandee se lance.</li>
          <li><strong>Mise a jour des compteurs</strong> &mdash; Les statistiques d'usage sont enregistrees.</li>
          <li><strong>Remboursement automatique</strong> &mdash; En cas d'echec, les credits sont restitues sans aucune intervention.</li>
        </ol>

        <div class="callout callout-success">
          <div class="callout-title">Zero credit perdu</div>
          <p>Ce mecanisme garantit qu'aucun credit n'est perdu en cas d'erreur technique. Le systeme supporte deux modes de facturation transparents : abonnement avec quotas par fonctionnalite, ou credits a l'unite avec debit/remboursement automatique.</p>
        </div>

        <h3>4. Taches asynchrones avec retry intelligent</h3>

        <p>
          Les operations longues (generation de CV, traduction, export) sont executees de maniere asynchrone avec un suivi complet en base de donnees. Chaque tache suit un cycle de vie precis avec retry automatique en cas d'echec.
        </p>

        <div class="diagram">
          <div class="diagram-title">Cycle de vie d'une tache asynchrone</div>
          <div class="mermaid">
flowchart TD
    START(("*")) -->|"Creation"| pending["En attente"]
    pending -->|"Demarrage"| running["En cours"]
    running -->|"Succes"| completed["Termine"]
    running -->|"Echec"| failed["En echec"]
    failed -->|"Nouvel essai (max 3)"| running
    completed --> END(("*"))
    failed -->|"Maximum atteint"| END

    style START fill:#0ea5e9,stroke:#0284c7,color:#fff
    style pending fill:#f59e0b,stroke:#d97706,color:#fff
    style running fill:#8b5cf6,stroke:#7c3aed,color:#fff
    style completed fill:#22c55e,stroke:#16a34a,color:#fff
    style failed fill:#ef4444,stroke:#dc2626,color:#fff
    style END fill:#64748b,stroke:#475569,color:#fff
          </div>
        </div>

        <p>
          La progression de chaque tache est diffusee en temps reel vers l'interface utilisateur via une connexion persistante (Server-Sent Events), permettant un suivi en direct sans rechargement de page.
        </p>

        <!-- ============================================================ -->
        <!-- CI/CD ET VERSIONING                                          -->
        <!-- ============================================================ -->

        <h2>Deploiement continu et versioning automatique</h2>

        <p>
          Le deploiement est entierement automatise. Chaque demande de fusion declenche un environnement de pre-production complet avec une <strong>copie de la base de donnees de production</strong>, permettant de tester dans des conditions reelles avant toute mise en ligne.
        </p>

        <div class="diagram">
          <div class="diagram-title">Pipeline de deploiement automatise</div>
          <div class="mermaid">
flowchart LR
    PR["Demande de fusion"] --> PreProd["Pre-production<br/>avec copie de la base"]
    PreProd --> Test["Tests en conditions<br/>reelles"]
    Merge["Fusion validee"] --> Bump["Versioning<br/>automatique"]
    Bump --> Deploy["Deploiement<br/>en production"]
    Deploy --> Sync["Synchronisation<br/>de toutes les branches"]

    style PR fill:#0ea5e9,stroke:#0284c7,color:#fff
    style PreProd fill:#6366f1,stroke:#4f46e5,color:#fff
    style Test fill:#f59e0b,stroke:#d97706,color:#fff
    style Merge fill:#0ea5e9,stroke:#0284c7,color:#fff
    style Bump fill:#8b5cf6,stroke:#7c3aed,color:#fff
    style Deploy fill:#22c55e,stroke:#16a34a,color:#fff
    style Sync fill:#64748b,stroke:#475569,color:#fff
          </div>
        </div>

        <h3>Versioning semantique a 4 niveaux</h3>

        <p>
          Le versioning est entierement automatise via un systeme a 4 niveaux (<strong>Major.Minor.Patch.Build</strong>) base sur les conventions de messages de commit. A chaque fusion, un script analyse automatiquement tous les commits de la demande de fusion et applique le bon increment de version :
        </p>

        <table>
          <thead>
            <tr>
              <th>Niveau</th>
              <th>Declencheur</th>
              <th>Signification</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="badge badge-error">Major</span></td>
              <td>Changement incompatible</td>
              <td>Modification cassante pour les utilisateurs existants</td>
            </tr>
            <tr>
              <td><span class="badge badge-primary">Minor</span></td>
              <td>Nouvelle fonctionnalite</td>
              <td>Capacite inedite ajoutee a la plateforme</td>
            </tr>
            <tr>
              <td><span class="badge badge-warning">Patch</span></td>
              <td>Correction ou amelioration</td>
              <td>Bug corrige ou fonctionnalite existante amelioree</td>
            </tr>
            <tr>
              <td><span class="badge badge-success">Build</span></td>
              <td>Maintenance interne</td>
              <td>Documentation, configuration, outillage</td>
            </tr>
          </tbody>
        </table>

        <p>
          La version est propagee automatiquement dans l'ensemble de la plateforme apres chaque fusion. Les branches de developpement sont ensuite synchronisees pour maintenir la coherence du code a travers tous les environnements.
        </p>

        <!-- ============================================================ -->
        <!-- POINTS CLES                                                  -->
        <!-- ============================================================ -->

        <h2>Points cles a retenir</h2>

        <div class="callout callout-info">
          <div class="callout-title">Monolithe modulaire</div>
          <p>Bien que deployee comme une seule unite, l'application est rigoureusement separee en 34 modules independants. Chaque module possede son propre perimetre fonctionnel et expose uniquement une interface publique &mdash; garantissant un couplage faible et une haute cohesion.</p>
        </div>

        <div class="callout callout-success">
          <div class="callout-title">5 pipelines IA specialises</div>
          <p>Cinq pipelines d'intelligence artificielle couvrent l'ensemble des besoins : adaptation de CV selon une offre, optimisation de contenu, import PDF intelligent, generation depuis un intitule de poste, et creation de templates. Chaque pipeline utilise des appels paralleles avec des reponses structurees et validees par schema.</p>
        </div>

        <div class="callout callout-warning">
          <div class="callout-title">Sorties IA structurees et fiables</div>
          <p>Tous les appels a l'intelligence artificielle utilisent un systeme de sorties structurees avec validation par schema, garantissant que chaque reponse de l'IA respecte un format predefini. Cela elimine les erreurs d'interpretation et assure la fiabilite des traitements automatises.</p>
        </div>

      </div>
    </main>
  </div>

  <script src="./assets/js/layout.js?v=1.0.4"></script>
  <script src="./assets/js/main.js?v=1.0.4"></script>
</body>
</html>
