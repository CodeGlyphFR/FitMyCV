{
  "name": "cv_extraction",
  "strict": true,
  "schema": {
    "type": "object",
    "properties": {
      "generated_at": {
        "type": "string",
        "description": "Date ISO de génération"
      },
      "header": {
        "type": "object",
        "properties": {
          "full_name": { "type": "string" },
          "current_title": { "type": "string" },
          "contact": {
            "type": "object",
            "properties": {
              "email": { "type": "string" },
              "phone": { "type": "string" },
              "location": {
                "type": "object",
                "properties": {
                  "city": { "type": "string" },
                  "region": { "type": "string" },
                  "country_code": { "type": "string" }
                },
                "required": ["city", "region", "country_code"],
                "additionalProperties": false
              },
              "links": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "type": { "type": "string", "description": "linkedin, github, portfolio, other" },
                    "label": { "type": "string" },
                    "url": { "type": "string" }
                  },
                  "required": ["type", "label", "url"],
                  "additionalProperties": false
                }
              }
            },
            "required": ["email", "phone", "location", "links"],
            "additionalProperties": false
          }
        },
        "required": ["full_name", "current_title", "contact"],
        "additionalProperties": false
      },
      "summary": {
        "type": "object",
        "properties": {
          "headline": { "type": "string" },
          "description": { "type": "string" },
          "years_experience": { "type": "integer" },
          "domains": {
            "type": "array",
            "items": { "type": "string" }
          },
          "key_strengths": {
            "type": "array",
            "items": { "type": "string" }
          }
        },
        "required": ["headline", "description", "years_experience", "domains", "key_strengths"],
        "additionalProperties": false
      },
      "skills": {
        "type": "object",
        "properties": {
          "hard_skills": {
            "type": "array",
            "description": "Compétences techniques SAUF logiciels. Ex: Gestion de projet, Analyse de données",
            "items": {
              "type": "object",
              "properties": {
                "name": { "type": "string", "description": "Commence par une MAJUSCULE" },
                "proficiency": { "type": "string", "description": "beginner, intermediate, advanced, expert" }
              },
              "required": ["name", "proficiency"],
              "additionalProperties": false
            }
          },
          "soft_skills": {
            "type": "array",
            "items": { "type": "string", "description": "Commence par une MAJUSCULE" }
          },
          "tools": {
            "type": "array",
            "description": "TOUS les logiciels ici: Excel, SAP, Photoshop, Figma, VS Code, etc.",
            "items": {
              "type": "object",
              "properties": {
                "name": { "type": "string", "description": "Commence par une MAJUSCULE" },
                "proficiency": { "type": "string", "description": "beginner, intermediate, advanced, expert" }
              },
              "required": ["name", "proficiency"],
              "additionalProperties": false
            }
          },
          "methodologies": {
            "type": "array",
            "items": { "type": "string", "description": "Agile, Scrum, Lean, etc." }
          }
        },
        "required": ["hard_skills", "soft_skills", "tools", "methodologies"],
        "additionalProperties": false
      },
      "experience": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "title": { "type": "string" },
            "company": { "type": "string" },
            "department_or_client": { "type": "string" },
            "start_date": { "type": "string", "description": "Format YYYY-MM" },
            "end_date": { "type": "string", "description": "Format YYYY-MM ou vide si actuel" },
            "location": {
              "type": "object",
              "properties": {
                "city": { "type": "string" },
                "region": { "type": "string" },
                "country_code": { "type": "string" }
              },
              "required": ["city", "region", "country_code"],
              "additionalProperties": false
            },
            "description": { "type": "string" },
            "responsibilities": {
              "type": "array",
              "items": { "type": "string" }
            },
            "deliverables": {
              "type": "array",
              "items": { "type": "string" }
            },
            "skills_used": {
              "type": "array",
              "items": { "type": "string" }
            }
          },
          "required": ["title", "company", "department_or_client", "start_date", "end_date", "location", "description", "responsibilities", "deliverables", "skills_used"],
          "additionalProperties": false
        }
      },
      "education": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "institution": { "type": "string" },
            "degree": { "type": "string" },
            "field_of_study": { "type": "string" },
            "location": {
              "type": "object",
              "properties": {
                "city": { "type": "string" },
                "region": { "type": "string" },
                "country_code": { "type": "string" }
              },
              "required": ["city", "region", "country_code"],
              "additionalProperties": false
            },
            "start_date": { "type": "string" },
            "end_date": { "type": "string" }
          },
          "required": ["institution", "degree", "field_of_study", "location", "start_date", "end_date"],
          "additionalProperties": false
        }
      },
      "languages": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "name": { "type": "string" },
            "level": { "type": "string", "description": "A1, A2, B1, B2, C1, C2, native" }
          },
          "required": ["name", "level"],
          "additionalProperties": false
        }
      },
      "extras": {
        "type": "array",
        "description": "Certifications, bénévolat, hobbies, etc.",
        "items": {
          "type": "object",
          "properties": {
            "name": { "type": "string" },
            "summary": { "type": "string" }
          },
          "required": ["name", "summary"],
          "additionalProperties": false
        }
      },
      "projects": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "name": { "type": "string" },
            "role": { "type": "string" },
            "summary": { "type": "string" },
            "tech_stack": {
              "type": "array",
              "items": { "type": "string" }
            },
            "keywords": {
              "type": "array",
              "items": { "type": "string" }
            },
            "start_date": { "type": "string" },
            "end_date": { "type": "string" }
          },
          "required": ["name", "role", "summary", "tech_stack", "keywords", "start_date", "end_date"],
          "additionalProperties": false
        }
      },
      "order_hint": {
        "type": "array",
        "items": { "type": "string" }
      },
      "section_titles": {
        "type": "object",
        "properties": {
          "summary": { "type": "string" },
          "skills": { "type": "string" },
          "experience": { "type": "string" },
          "education": { "type": "string" },
          "languages": { "type": "string" },
          "extras": { "type": "string" },
          "projects": { "type": "string" }
        },
        "required": ["summary", "skills", "experience", "education", "languages", "extras", "projects"],
        "additionalProperties": false
      },
      "meta": {
        "type": "object",
        "properties": {
          "generator": { "type": "string" },
          "source": { "type": "string" },
          "created_at": { "type": "string" },
          "updated_at": { "type": "string" }
        },
        "required": ["generator", "source", "created_at", "updated_at"],
        "additionalProperties": false
      }
    },
    "required": [
      "generated_at",
      "header",
      "summary",
      "skills",
      "experience",
      "education",
      "languages",
      "extras",
      "projects",
      "order_hint",
      "section_titles",
      "meta"
    ],
    "additionalProperties": false
  }
}
